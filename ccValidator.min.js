!function(n,t,r){"use strict";function e(t){var r=v;return n.each(u,function(n,e){e.startsWith.indexOf(t)>-1&&(r=n)}),r}function i(n){var t=v;for(var r in f)if(0===n.indexOf(f[r]))return e(f[r]);return t}function a(n){var t=n.split("").map(Number),r=t.pop();t.reverse();for(var e=0;e<t.length;e++)e%2===0&&(t[e]=2*t[e],t[e]>9&&(t[e]=t[e]-9));var i=0;for(var a in t)i+=t[a];return(i+r)%10===0}function c(n,t){return n.length>=u[t].min&&n.length<=u[t].max}function s(n){var t=Object.keys(u),r=[];for(var e in n)-1===t.indexOf(n[e])&&r.push(e);r.reverse();for(var e in r)n.splice(r[e],1);return n}var u={amex:{ccvLen:4,startsWith:["34","37"],min:15,max:15},dinersCart:{ccvLen:4,startsWith:["300","301","302","303","304","305"],min:14,max:14},dinersInt:{ccvLen:4,startsWith:["36"],min:14,max:14},dinersUS:{ccvLen:4,startsWith:["54"],min:16,max:16},discover:{ccvLen:3,startsWith:["6011","622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925","644","645","646","647","648","649","65"],min:16,max:16},insta:{ccvLen:3,startsWith:["637","638","639"],min:16,max:16},jcb:{ccvLen:3,startsWith:["352","353","354","355","356","357","358"],min:16,max:16},laser:{ccvLen:3,startsWith:["6304","6706","6771","6709"],min:16,max:19},maestro:{ccvLen:3,startsWith:["5018","5020","5038","6304","6759","6761","6762","6763","6764","6765","6766"],min:16,max:19},master:{ccvLen:3,startsWith:["51","52","53","54","55"],min:16,max:19},solo:{ccvLen:3,startsWith:["6334","6767"],min:16,max:19},UNIONPAY:{ccvLen:3,startsWith:["622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925"],min:16,max:19},visae:{ccvLen:3,startsWith:["4026","417500","4508","4844","4913","4917"],min:16,max:16},visa:{ccvLen:3,startsWith:["4"],min:13,max:16}},v="unknown",f=[];n.each(u,function(n,t){f=f.concat(t.startsWith)}),n.fn.validCC=function(t){function r(t){var r=t.val();if(n.isNumeric(r)){var e=i(r);if(m.indexOf(e)>-1&&c(r,e))return a(r)}return!1}function e(n){r(n)?f.success.call(n.get(0)):f.failure.call(n.get(0))}var v={on:!1,acceptedCards:Object.keys(u),success:function(){},failure:function(){}},f=n.extend(v,t||{}),m=s(f.acceptedCards),o=n(this);return"string"==typeof f.on&&o.bind(f.on,function(){e(n(this))}),r(o)},n.fn.validCvv=function(t){var r,e={cardType:"",cardInput:""},a=n.extend(e,t||{}),c=n(this),s=c.val(),v=""!=a.cardInput,f=""!=a.cardType;if(n.isNumeric(s)){if(f){r=u[a.cardType].ccvLen;var m=new RegExp("^[0-9]{"+r+"}$");return m.test(s)}if(v){var o=a.cardInput.value;if(n.isNumeric(o)){var d=i(o);if("unknown"===d)return!1;r=u[d].ccvLen;var m=new RegExp("^[0-9]{"+r+"}$");return m.test(s)}}if(/^[0-9]{3,4}$/.test(s))return!0}return!1},n.fn.validLength=function(t){var r={acceptedCards:Object.keys(u)},e=n.extend(r,t||{}),a=n(this),v=s(e.acceptedCards),f=a.val();if(n.isNumeric(f)){var m=i(f);if(v.indexOf(m)>-1&&c(f,m))return!0}return!1},n.fn.getCardType=function(){var t=n(this),r=t.val();return n.isNumeric(r)?i(r):v},n.fn.luhnCheck=function(){var t=n(this),r=t.val();return n.isNumeric(r)?a(r):!1}}(jQuery,window);