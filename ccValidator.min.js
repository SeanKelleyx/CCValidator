!function(n,t,e){"use strict";function r(t){var e=d;return n.each(o,function(n,r){r.startsWith.indexOf(t)>-1&&(e=n)}),e}function a(n){var t=d;for(var e in h)if(0===n.indexOf(h[e]))return r(h[e]);return t}function i(n){var t=n.split("").map(Number),e=t.pop();t.reverse();for(var r=0;r<t.length;r++)r%2===0&&(t[r]=2*t[r],t[r]>9&&(t[r]=t[r]-9));var a=0;for(var i in t)a+=t[i];return(a+e)%10===0}function c(n,t){return n.length>=o[t].min&&n.length<=o[t].max}function s(n){var t=Object.keys(o),e=[];for(var r in n)-1===t.indexOf(n[r])&&e.push(r);e.reverse();for(var r in e)n.splice(e[r],1);return n}function u(n){var t=100;for(var e in n)o[n[e]].min<t&&(t=o[n[e]].min);return t}function v(n){var t=0;for(var e in n)o[n[e]].max>t&&(t=o[n[e]].max);return t}function f(n,t,r){var a;return n!==e&&t!==e&&r!==e?a=new Date(n,t-1,r):n!==e&&t!==e?a=new Date(n,t-1):n!==e?a=new Date(n,11):(a=new Date,a.setDate(a.getDate()-1)),a}function m(n){var t=new Date;return n>=t}var o={amex:{ccvLen:4,startsWith:["34","37"],min:15,max:15},dinersCart:{ccvLen:4,startsWith:["300","301","302","303","304","305"],min:14,max:14},dinersInt:{ccvLen:4,startsWith:["36"],min:14,max:14},dinersUS:{ccvLen:4,startsWith:["54"],min:16,max:16},discover:{ccvLen:3,startsWith:["6011","622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925","644","645","646","647","648","649","65"],min:16,max:16},insta:{ccvLen:3,startsWith:["637","638","639"],min:16,max:16},jcb:{ccvLen:3,startsWith:["352","353","354","355","356","357","358"],min:16,max:16},laser:{ccvLen:3,startsWith:["6304","6706","6771","6709"],min:16,max:19},maestro:{ccvLen:3,startsWith:["5018","5020","5038","6304","6759","6761","6762","6763","6764","6765","6766"],min:16,max:19},master:{ccvLen:3,startsWith:["51","52","53","54","55"],min:16,max:19},solo:{ccvLen:3,startsWith:["6334","6767"],min:16,max:19},UNIONPAY:{ccvLen:3,startsWith:["622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925"],min:16,max:19},visae:{ccvLen:3,startsWith:["4026","417500","4508","4844","4913","4917"],min:16,max:16},visa:{ccvLen:3,startsWith:["4"],min:13,max:16}},d="unknown",h=[];n.each(o,function(n,t){h=h.concat(t.startsWith)}),n.fn.validCC=function(t){function e(t){var e=t.val();if(n.isNumeric(e)){var r=a(e);if(f.indexOf(r)>-1&&c(e,r))return i(e)}return!1}function r(n){e(n)?v.success.call(n.get(0)):v.failure.call(n.get(0))}var u={on:!1,acceptedCards:Object.keys(o),success:function(){},failure:function(){}},v=n.extend(u,t||{}),f=s(v.acceptedCards),m=n(this);return"string"==typeof v.on&&m.bind(v.on,function(){r(n(this))}),e(m)},n.fn.validCvv=function(t){var e,r={cardType:"",cardInput:""},i=n.extend(r,t||{}),c=n(this),s=c.val(),u=""!=i.cardInput,v=""!=i.cardType;if(n.isNumeric(s)){if(v){e=o[i.cardType].ccvLen;var f=new RegExp("^[0-9]{"+e+"}$");return f.test(s)}if(u){var m=i.cardInput.value;if(n.isNumeric(m)){var d=a(m);if("unknown"===d)return!1;e=o[d].ccvLen;var f=new RegExp("^[0-9]{"+e+"}$");return f.test(s)}}if(/^[0-9]{3,4}$/.test(s))return!0}return!1},n.fn.validLength=function(t){var e={acceptedCards:Object.keys(o)},r=n.extend(e,t||{}),a=n(this),i=s(r.acceptedCards),c=a.val();return n.isNumeric(c)?c.length>=u(i)&&c.length<=v(i):!1},n.fn.getCardType=function(){var t=n(this),e=t.val();return n.isNumeric(e)?a(e):d},n.fn.luhnCheck=function(){var t=n(this),e=t.val();return n.isNumeric(e)?i(e):!1},n.isDateValid=function(t){var r={year:e,month:e,day:e},a=n.extend(r,t||{});return m(f(a.year,a.month,a.day))}}(jQuery,window);